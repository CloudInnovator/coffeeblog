{"ast":null,"code":"var _jsxFileName = \"/home/brave/Documents/weekendproject/coffeeblog/src/components/LikeButton.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { supabase } from '../lib/supabase';\nimport './LikeButton.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst LikeButton = ({\n  articleId,\n  title\n}) => {\n  _s();\n  const [isLiked, setIsLiked] = useState(false);\n  const [likeCount, setLikeCount] = useState(0);\n  const [isLoading, setIsLoading] = useState(false);\n  useEffect(() => {\n    checkLikeStatus();\n    getLikeCount();\n  }, [articleId]);\n  const checkLikeStatus = async () => {\n    try {\n      const {\n        data: {\n          user\n        }\n      } = await supabase.auth.getUser();\n      if (!user) return;\n      const {\n        data\n      } = await supabase.from('article_likes').select('id').eq('user_id', user.id).eq('article_id', articleId).single();\n      setIsLiked(!!data);\n    } catch (error) {\n      console.error('Error checking like status:', error);\n    }\n  };\n  const getLikeCount = async () => {\n    try {\n      const {\n        count\n      } = await supabase.from('article_likes').select('*', {\n        count: 'exact'\n      }).eq('article_id', articleId);\n      setLikeCount(count || 0);\n    } catch (error) {\n      console.error('Error getting like count:', error);\n    }\n  };\n  const handleLike = async () => {\n    setIsLoading(true);\n    try {\n      const {\n        data: {\n          user\n        }\n      } = await supabase.auth.getUser();\n      if (!user) {\n        alert('Please sign in to like articles');\n        return;\n      }\n      if (isLiked) {\n        // Remove like\n        const {\n          error\n        } = await supabase.from('article_likes').delete().eq('user_id', user.id).eq('article_id', articleId);\n        if (error) throw error;\n        setIsLiked(false);\n        setLikeCount(prev => prev - 1);\n      } else {\n        // Add like\n        const {\n          error\n        } = await supabase.from('article_likes').insert([{\n          user_id: user.id,\n          article_id: articleId,\n          article_title: title\n        }]);\n        if (error) throw error;\n        setIsLiked(true);\n        setLikeCount(prev => prev + 1);\n      }\n    } catch (error) {\n      console.error('Error liking article:', error);\n      alert('Error liking article. Please try again.');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"button\", {\n    onClick: handleLike,\n    disabled: isLoading,\n    className: `like-btn ${isLiked ? 'liked' : ''}`,\n    title: isLiked ? 'Unlike' : 'Like',\n    children: [isLoading ? '...' : isLiked ? '‚ù§Ô∏è' : 'ü§ç', \" \", likeCount]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 96,\n    columnNumber: 5\n  }, this);\n};\n_s(LikeButton, \"fwOJpQXh7Irvi4lY3R7SXQF/JKI=\");\n_c = LikeButton;\nexport default LikeButton;\nvar _c;\n$RefreshReg$(_c, \"LikeButton\");","map":{"version":3,"names":["React","useState","useEffect","supabase","jsxDEV","_jsxDEV","LikeButton","articleId","title","_s","isLiked","setIsLiked","likeCount","setLikeCount","isLoading","setIsLoading","checkLikeStatus","getLikeCount","data","user","auth","getUser","from","select","eq","id","single","error","console","count","handleLike","alert","delete","prev","insert","user_id","article_id","article_title","onClick","disabled","className","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/home/brave/Documents/weekendproject/coffeeblog/src/components/LikeButton.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { supabase } from '../lib/supabase';\nimport './LikeButton.css';\n\ninterface LikeButtonProps {\n  articleId: string;\n  title: string;\n}\n\nconst LikeButton: React.FC<LikeButtonProps> = ({ articleId, title }) => {\n  const [isLiked, setIsLiked] = useState(false);\n  const [likeCount, setLikeCount] = useState(0);\n  const [isLoading, setIsLoading] = useState(false);\n\n  useEffect(() => {\n    checkLikeStatus();\n    getLikeCount();\n  }, [articleId]);\n\n  const checkLikeStatus = async () => {\n    try {\n      const { data: { user } } = await supabase.auth.getUser();\n      if (!user) return;\n\n      const { data } = await supabase\n        .from('article_likes')\n        .select('id')\n        .eq('user_id', user.id)\n        .eq('article_id', articleId)\n        .single();\n\n      setIsLiked(!!data);\n    } catch (error) {\n      console.error('Error checking like status:', error);\n    }\n  };\n\n  const getLikeCount = async () => {\n    try {\n      const { count } = await supabase\n        .from('article_likes')\n        .select('*', { count: 'exact' })\n        .eq('article_id', articleId);\n\n      setLikeCount(count || 0);\n    } catch (error) {\n      console.error('Error getting like count:', error);\n    }\n  };\n\n  const handleLike = async () => {\n    setIsLoading(true);\n    try {\n      const { data: { user } } = await supabase.auth.getUser();\n      if (!user) {\n        alert('Please sign in to like articles');\n        return;\n      }\n\n      if (isLiked) {\n        // Remove like\n        const { error } = await supabase\n          .from('article_likes')\n          .delete()\n          .eq('user_id', user.id)\n          .eq('article_id', articleId);\n\n        if (error) throw error;\n        setIsLiked(false);\n        setLikeCount(prev => prev - 1);\n      } else {\n        // Add like\n        const { error } = await supabase\n          .from('article_likes')\n          .insert([\n            {\n              user_id: user.id,\n              article_id: articleId,\n              article_title: title\n            }\n          ]);\n\n        if (error) throw error;\n        setIsLiked(true);\n        setLikeCount(prev => prev + 1);\n      }\n    } catch (error) {\n      console.error('Error liking article:', error);\n      alert('Error liking article. Please try again.');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  return (\n    <button\n      onClick={handleLike}\n      disabled={isLoading}\n      className={`like-btn ${isLiked ? 'liked' : ''}`}\n      title={isLiked ? 'Unlike' : 'Like'}\n    >\n      {isLoading ? '...' : isLiked ? '‚ù§Ô∏è' : 'ü§ç'} {likeCount}\n    </button>\n  );\n};\n\nexport default LikeButton;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}