{"ast":null,"code":"import React,{useState,useEffect}from'react';import'./ArticleComments.css';import{jsxs as _jsxs,jsx as _jsx}from\"react/jsx-runtime\";const ArticleComments=_ref=>{let{articleId,articleTitle}=_ref;const[comments,setComments]=useState([]);const[newComment,setNewComment]=useState('');const[username,setUsername]=useState('');const[isAnonymous,setIsAnonymous]=useState(false);const[isLoggedIn,setIsLoggedIn]=useState(false);useEffect(()=>{// Load comments for this article\nconst allComments=JSON.parse(localStorage.getItem('articleComments')||'[]');const articleComments=allComments.filter(comment=>comment.articleId===articleId);setComments(articleComments);// Check if user is logged in\nconst user=localStorage.getItem('currentUser');if(user){const userData=JSON.parse(user);setIsLoggedIn(true);setUsername(userData.username);}},[articleId]);const handleSubmitComment=e=>{e.preventDefault();if(!newComment.trim())return;const comment={id:Date.now().toString(),articleId,content:newComment.trim(),username:isAnonymous?'Anonymous':username||'Guest',isAnonymous,timestamp:new Date().toISOString()};// Save to all comments\nconst allComments=JSON.parse(localStorage.getItem('articleComments')||'[]');const updatedComments=[...allComments,comment];localStorage.setItem('articleComments',JSON.stringify(updatedComments));// Save to user's comments if they're logged in\nif(isLoggedIn){const userComments=JSON.parse(localStorage.getItem('userComments')||'[]');const userComment={id:comment.id,articleId,articleTitle,content:comment.content,date:new Date(comment.timestamp).toLocaleDateString(),isAnonymous,username:comment.username};userComments.push(userComment);localStorage.setItem('userComments',JSON.stringify(userComments));}// Update local state\nsetComments([...comments,comment]);setNewComment('');};const formatDate=timestamp=>{const date=new Date(timestamp);return date.toLocaleDateString()+' at '+date.toLocaleTimeString([],{hour:'2-digit',minute:'2-digit'});};return/*#__PURE__*/_jsxs(\"div\",{className:\"article-comments\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"comments-header\",children:/*#__PURE__*/_jsxs(\"h3\",{children:[\"Comments (\",comments.length,\")\"]})}),/*#__PURE__*/_jsx(\"div\",{className:\"comments-list\",children:comments.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"no-comments\",children:/*#__PURE__*/_jsx(\"p\",{children:\"No comments yet. Be the first to share your thoughts!\"})}):comments.map(comment=>/*#__PURE__*/_jsxs(\"div\",{className:\"comment\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"comment-header\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"comment-author\",children:comment.isAnonymous?'ðŸ‘¤ Anonymous':\"\\uD83D\\uDC64 \".concat(comment.username)}),/*#__PURE__*/_jsx(\"span\",{className:\"comment-date\",children:formatDate(comment.timestamp)})]}),/*#__PURE__*/_jsx(\"div\",{className:\"comment-content\",children:comment.content})]},comment.id))}),/*#__PURE__*/_jsxs(\"div\",{className:\"comment-form\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Add a Comment\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmitComment,children:[!isLoggedIn&&/*#__PURE__*/_jsx(\"div\",{className:\"username-input\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Your name (optional)\",value:username,onChange:e=>setUsername(e.target.value),className:\"username-field\"})}),/*#__PURE__*/_jsx(\"textarea\",{value:newComment,onChange:e=>setNewComment(e.target.value),placeholder:\"Share your thoughts...\",className:\"comment-textarea\",rows:4,required:true}),/*#__PURE__*/_jsxs(\"div\",{className:\"comment-options\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"anonymous-checkbox\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:isAnonymous,onChange:e=>setIsAnonymous(e.target.checked)}),\"Comment anonymously\"]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary\",children:\"Post Comment\"})]})]})]})]});};export default ArticleComments;","map":{"version":3,"names":["React","useState","useEffect","jsxs","_jsxs","jsx","_jsx","ArticleComments","_ref","articleId","articleTitle","comments","setComments","newComment","setNewComment","username","setUsername","isAnonymous","setIsAnonymous","isLoggedIn","setIsLoggedIn","allComments","JSON","parse","localStorage","getItem","articleComments","filter","comment","user","userData","handleSubmitComment","e","preventDefault","trim","id","Date","now","toString","content","timestamp","toISOString","updatedComments","setItem","stringify","userComments","userComment","date","toLocaleDateString","push","formatDate","toLocaleTimeString","hour","minute","className","children","length","map","concat","onSubmit","type","placeholder","value","onChange","target","rows","required","checked"],"sources":["/home/brave/Documents/weekendproject/coffeeblog/src/components/ArticleComments.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport './ArticleComments.css';\n\ninterface Comment {\n  id: string;\n  articleId: string;\n  content: string;\n  username: string;\n  isAnonymous: boolean;\n  timestamp: string;\n}\n\ninterface ArticleCommentsProps {\n  articleId: string;\n  articleTitle: string;\n}\n\nconst ArticleComments: React.FC<ArticleCommentsProps> = ({ articleId, articleTitle }) => {\n  const [comments, setComments] = useState<Comment[]>([]);\n  const [newComment, setNewComment] = useState('');\n  const [username, setUsername] = useState('');\n  const [isAnonymous, setIsAnonymous] = useState(false);\n  const [isLoggedIn, setIsLoggedIn] = useState(false);\n\n  useEffect(() => {\n    // Load comments for this article\n    const allComments = JSON.parse(localStorage.getItem('articleComments') || '[]');\n    const articleComments = allComments.filter((comment: Comment) => comment.articleId === articleId);\n    setComments(articleComments);\n\n    // Check if user is logged in\n    const user = localStorage.getItem('currentUser');\n    if (user) {\n      const userData = JSON.parse(user);\n      setIsLoggedIn(true);\n      setUsername(userData.username);\n    }\n  }, [articleId]);\n\n  const handleSubmitComment = (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!newComment.trim()) return;\n\n    const comment: Comment = {\n      id: Date.now().toString(),\n      articleId,\n      content: newComment.trim(),\n      username: isAnonymous ? 'Anonymous' : (username || 'Guest'),\n      isAnonymous,\n      timestamp: new Date().toISOString()\n    };\n\n    // Save to all comments\n    const allComments = JSON.parse(localStorage.getItem('articleComments') || '[]');\n    const updatedComments = [...allComments, comment];\n    localStorage.setItem('articleComments', JSON.stringify(updatedComments));\n\n    // Save to user's comments if they're logged in\n    if (isLoggedIn) {\n      const userComments = JSON.parse(localStorage.getItem('userComments') || '[]');\n      const userComment = {\n        id: comment.id,\n        articleId,\n        articleTitle,\n        content: comment.content,\n        date: new Date(comment.timestamp).toLocaleDateString(),\n        isAnonymous,\n        username: comment.username\n      };\n      userComments.push(userComment);\n      localStorage.setItem('userComments', JSON.stringify(userComments));\n    }\n\n    // Update local state\n    setComments([...comments, comment]);\n    setNewComment('');\n  };\n\n  const formatDate = (timestamp: string) => {\n    const date = new Date(timestamp);\n    return date.toLocaleDateString() + ' at ' + date.toLocaleTimeString([], { \n      hour: '2-digit', \n      minute: '2-digit' \n    });\n  };\n\n  return (\n    <div className=\"article-comments\">\n      <div className=\"comments-header\">\n        <h3>Comments ({comments.length})</h3>\n      </div>\n\n      <div className=\"comments-list\">\n        {comments.length === 0 ? (\n          <div className=\"no-comments\">\n            <p>No comments yet. Be the first to share your thoughts!</p>\n          </div>\n        ) : (\n          comments.map(comment => (\n            <div key={comment.id} className=\"comment\">\n              <div className=\"comment-header\">\n                <span className=\"comment-author\">\n                  {comment.isAnonymous ? 'ðŸ‘¤ Anonymous' : `ðŸ‘¤ ${comment.username}`}\n                </span>\n                <span className=\"comment-date\">\n                  {formatDate(comment.timestamp)}\n                </span>\n              </div>\n              <div className=\"comment-content\">\n                {comment.content}\n              </div>\n            </div>\n          ))\n        )}\n      </div>\n\n      <div className=\"comment-form\">\n        <h4>Add a Comment</h4>\n        <form onSubmit={handleSubmitComment}>\n          {!isLoggedIn && (\n            <div className=\"username-input\">\n              <input\n                type=\"text\"\n                placeholder=\"Your name (optional)\"\n                value={username}\n                onChange={(e) => setUsername(e.target.value)}\n                className=\"username-field\"\n              />\n            </div>\n          )}\n          \n          <textarea\n            value={newComment}\n            onChange={(e) => setNewComment(e.target.value)}\n            placeholder=\"Share your thoughts...\"\n            className=\"comment-textarea\"\n            rows={4}\n            required\n          />\n          \n          <div className=\"comment-options\">\n            <label className=\"anonymous-checkbox\">\n              <input\n                type=\"checkbox\"\n                checked={isAnonymous}\n                onChange={(e) => setIsAnonymous(e.target.checked)}\n              />\n              Comment anonymously\n            </label>\n            \n            <button type=\"submit\" className=\"btn btn-primary\">\n              Post Comment\n            </button>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n};\n\nexport default ArticleComments;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}